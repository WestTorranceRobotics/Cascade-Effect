#pragma config(Hubs,  S1, HTMotor,  HTMotor,  HTServo,  none)
#pragma config(Sensor, S4,     light,          sensorLightActive)
#pragma config(Motor,  mtr_S1_C1_1,     leftNush,      tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_2,     rightNush,     tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C2_1,     nushTake,      tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_2,     lanushearLift, tmotorTetrix, openLoop, encoder)
#pragma config(Servo,  srvo_S1_C3_1,    servo1,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_2,    servo2,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_3,    box1,                 tServoStandard)
#pragma config(Servo,  srvo_S1_C3_4,    box2,                 tServoStandard)
#pragma config(Servo,  srvo_S1_C3_5,    gripper,              tServoStandard)
#pragma config(Servo,  srvo_S1_C3_6,    servo6,               tServoNone)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "JoystickDriver.c"

void initializerobot()
{
		motor[leftNush] = 0;
		motor[rightNush] = 0;
		motor[lanushearLift] = 0;
		motor[nushTake] = 0;
		nMotorEncoder[leftNush] = 0;
		nMotorEncoder[rightNush] = 0;
		nMotorEncoder[lanushearLift] = 0;
		servo[gripper] = 0;
		servo[box1] = 130;
		servo[box2] = 0;
}

bool toggle = false;
bool gripToggle = false;
bool ballPassing = false;
bool boxToggle = false;
bool intakeActive = true;
int currentLinearOne;
int currentLinearTwo;
int lanushearlifter;
int preValue;
int ballsPassed = 0;
bool pressed1 = false;
bool pressed2 = false;
int lel;
bool leel = false;

task main()
{
	initializerobot();
	while(true)
	{
			lel = nMotorEncoder[lanushearLift];

			if(joystick.joy1_y1 > 15 || joystick.joy1_y1 < -15)
			{
				motor[leftNush] = joystick.joy1_y1 * 100/128;
			}
			else
			{
				motor[leftNush] = 0;
			}

				if(joystick.joy1_y2 > 15 || joystick.joy1_y2 < -15)
			{
				motor[rightNush] = joystick.joy1_y2 * 100/128;
			}
			else
			{
				motor[rightNush] = 0;
			}

			if(intakeActive == true)
			{
				if(joystick.joy2_y1 > 15 || joystick.joy2_y1 < -15)
				{
					motor[nushTake] = joystick.joy2_y1 * 100/128;
				}
				else
				{
					motor[nushTake] = 0;
				}
			}


			if(joy2Btn(1) == 1 && pressed1 == false)
			{
				pressed1 = true;
				boxToggle = !boxToggle;
			}
			else if(joy2Btn(1) == 0)
			{
				pressed1 = false;
			}

			if(boxToggle == true)
			{
				servo[box1] = 60;
				servo[box2] = 235;
			}

			if(boxToggle == false)
			{
				servo[box1] = 130;
				servo[box2] = 0;
			}


			if(joy2Btn(2) == 1 && pressed2 == false)
			{
				pressed2 = true;
				gripToggle = !gripToggle;
			}
			else if(joy2Btn(2) == 0)
			{
				pressed2 = false;
			}

			if(gripToggle == true)
			{
				servo[gripper] = 160;
			}

			if(gripToggle == false)
			{
				servo[gripper] = 0;
			}


			if(joy2Btn(8) == 1)
			{
				motor[lanushearLift] = 100;
				intakeActive = true;
			}
			else if(joy2Btn(7) == 1)
			{
				motor[lanushearLift] = -20;
				intakeActive = true;
			}
			else
			{
				motor[lanushearLift] = 0;
			}

			nxtDisplayBigTextLine(3, "%d", lel);


	}


}
